# Система распознавания лиц и учета посещаемости

## Содержание
1. [Общее описание](#общее-описание)
2. [Требования к системе](#требования-к-системе)
3. [Установка](#установка)
4. [Запуск программы](#запуск-программы)
5. [Руководство пользователя](#руководство-пользователя)
6. [Устранение неполадок](#устранение-неполадок)
7. [Сборка приложения](#сборка-приложения)

## Общее описание
Система распознавания лиц и учета посещаемости - это приложение, которое позволяет:
- Регистрировать пользователей с фотографиями
- Автоматически распознавать лица через веб-камеру
- Вести учет посещаемости
- Экспортировать данные в различные форматы (Excel, Word, PDF)

## Требования к системе
### Windows
- Windows 10 или Windows 11
- Процессор с поддержкой AVX2
- Минимум 4 ГБ оперативной памяти
- 500 МБ свободного места на диске
- Веб-камера (встроенная или внешняя)
- Подключение к интернету для работы с базой данных

### macOS
- macOS 10.15 или новее
- Минимум 4 ГБ оперативной памяти
- 500 МБ свободного места на диске
- Веб-камера (встроенная или внешняя)
- Подключение к интернету для работы с базой данных

## Установка

### Windows

#### 1. Установка Python
1. Скачайте Python с официального сайта: https://www.python.org/downloads/
2. При установке обязательно отметьте галочки:
   - "Add Python to PATH"
   - "Install pip"
3. Завершите установку

#### 2. Установка Visual C++ Build Tools
1. Скачайте Visual Studio Build Tools: https://visualstudio.microsoft.com/visual-cpp-build-tools/
2. При установке выберите "Desktop development with C++"
3. Завершите установку

#### 3. Установка Python-зависимостей
1. Откройте командную строку (cmd) от имени администратора
2. Выполните следующие команды:

```bash
# Создание и активация виртуального окружения (рекомендуется)
python -m venv venv
venv\Scripts\activate

# Установка необходимых пакетов
pip install -r requirements.txt
```

### Возможные проблемы при установке на Windows

#### Проблема с установкой dlib
Если возникает ошибка при установке dlib, выполните:
```bash
# Установка предварительно скомпилированной версии dlib
pip install https://github.com/jloh02/dlib/releases/download/v19.24/dlib-19.24.0-cp39-cp39-win_amd64.whl
```

#### Проблема с установкой face-recognition
Если возникает ошибка при установке face-recognition, выполните:
```bash
# Установка необходимых библиотек
pip install cmake
pip install numpy

# Затем установите face-recognition
pip install face-recognition==1.3.0
```

#### Проблема с правами доступа
Если возникают ошибки с правами доступа:
1. Запустите командную строку от имени администратора
2. Выполните команду:
```bash
pip install --user -r requirements.txt
```

### macOS

### 1. Установка Python
1. Скачайте Python с официального сайта: https://www.python.org/downloads/
2. При установке обязательно отметьте галочку "Add Python to PATH"
3. Завершите установку

### 2. Установка системных зависимостей
Для macOS необходимо установить дополнительные системные библиотеки. Откройте Терминал и выполните:

```bash
# Установка Homebrew (если не установлен)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# Установка необходимых системных библиотек
brew install cmake
brew install boost
brew install boost-python3
```

### 3. Установка Python-зависимостей
Откройте Терминал и выполните следующие команды:

```bash
# Установка pip (если не установлен)
curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py
python3 get-pip.py

# Создание и активация виртуального окружения (рекомендуется)
python3 -m venv venv
source venv/bin/activate

# Установка необходимых пакетов
pip3 install -r requirements.txt
```

### Возможные проблемы при установке

#### Проблема с установкой dlib
Если возникает ошибка при установке dlib, выполните:
```bash
# Установка компилятора
xcode-select --install

# Затем попробуйте установить dlib отдельно
pip3 install dlib==19.24.2
```

#### Проблема с установкой face-recognition
Если возникает ошибка при установке face-recognition, выполните:
```bash
# Установка необходимых библиотек
brew install cmake
brew install boost
brew install boost-python3

# Затем установите face-recognition
pip3 install face-recognition==1.3.0
```

#### Проблема с правами доступа
Если возникают ошибки с правами доступа, используйте:
```bash
pip3 install --user -r requirements.txt
```

## Запуск программы
1. Откройте Терминал
2. Перейдите в папку с программой:
```bash
cd путь/к/папке/с/программой
```
3. Запустите программу:
```bash
python3 gui.py
```

## Руководство пользователя

### 1. Вкладка "База данных"
- Просмотр всех записей о посещаемости
- Кнопка "Очистить историю" - удаляет все записи
- Кнопка "Обновить ID" - пересчитывает идентификаторы записей

### 2. Вкладка "Экспорт"
- "Экспорт в Excel" - создает таблицу Excel
- "Экспорт в Word" - создает документ Word
- "Экспорт в PDF" - создает PDF-документ

### 3. Вкладка "Пользователи"
- "Добавить пользователя" - регистрация нового пользователя
  - Введите имя (без цифр)
  - Выберите фотографию
- "Удалить пользователя" - удаление выбранного пользователя

### 4. Вкладка "Камера"
- "Включить камеру" - запуск распознавания лиц
- "Выключить камеру" - остановка распознавания

## Устранение неполадок

### 1. Проблемы с установкой

#### Ошибка: "Python не найден"
```
Решение:
1. Переустановите Python
2. Убедитесь, что отмечена галочка "Add Python to PATH"
3. Перезапустите компьютер
```

#### Ошибка: "pip не найден"
```
Решение:
1. Откройте Терминал
2. Выполните команду:
   curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py
   python3 get-pip.py
```

### 2. Проблемы с камерой

#### Ошибка: "Не удалось открыть камеру"
```
Возможные причины:
1. Камера используется другим приложением
2. Нет разрешения на использование камеры
3. Проблемы с драйверами

Решение:
1. Закройте все приложения, использующие камеру
2. Проверьте настройки безопасности macOS:
   - Системные настройки → Конфиденциальность → Камера
   - Разрешите доступ для Terminal или Python
3. Перезапустите компьютер
```

#### Ошибка: "Камера работает медленно"
```
Решение:
1. Закройте другие приложения
2. Убедитесь, что камера не используется другими программами
3. Проверьте освещение в помещении
4. Перезапустите программу
```

### 3. Проблемы с базой данных

#### Ошибка: "Нет подключения к базе данных"
```
Решение:
1. Проверьте подключение к интернету
2. Перезапустите программу
3. Если проблема сохраняется, обратитесь к администратору
```

### 4. Проблемы с распознаванием лиц

#### Ошибка: "Лицо не распознано"
```
Возможные причины:
1. Плохое освещение
2. Лицо не полностью видно
3. Пользователь не зарегистрирован

Решение:
1. Улучшите освещение
2. Убедитесь, что лицо полностью видно
3. Зарегистрируйте пользователя, если он не зарегистрирован
```

#### Ошибка: "Низкая точность распознавания"
```
Решение:
1. Улучшите качество фотографии при регистрации
2. Обеспечьте хорошее освещение
3. Убедитесь, что лицо хорошо видно
4. Попробуйте перерегистрировать пользователя
```

### 5. Проблемы с экспортом

#### Ошибка: "Не удалось экспортировать данные"
```
Решение:
1. Убедитесь, что у вас есть права на запись в выбранную папку
2. Проверьте, что файл не открыт в другой программе
3. Попробуйте выбрать другую папку для сохранения
```

## Сборка приложения

### Windows

#### 1. Подготовка к сборке
1. Убедитесь, что все зависимости установлены:
```bash
pip install -r requirements.txt
```

#### 2. Сборка исполняемого файла
1. Откройте командную строку от имени администратора
2. Перейдите в папку с проектом
3. Запустите скрипт сборки:
```bash
python build.py
```

#### 3. После сборки
1. Перейдите в папку `dist/faceID`
2. Запустите `faceID.exe`

### Примечания по сборке
- Сборка может занять несколько минут
- Размер итогового приложения будет около 500-700 МБ
- Все необходимые зависимости будут включены в сборку
- Для работы приложения не требуется установка Python

## Контакты для поддержки
При возникновении проблем, которые не удается решить самостоятельно:
1. Сделайте скриншот ошибки
2. Запишите точные шаги, которые привели к ошибке
3. Обратитесь к техническому специалисту

## Примечания
- Регулярно делайте резервные копии базы данных
- Не удаляйте файлы программы
- При обновлении программы сохраняйте резервную копию данных 